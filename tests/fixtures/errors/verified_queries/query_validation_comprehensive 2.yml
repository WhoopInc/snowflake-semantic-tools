# Verified Query Validation - Comprehensive
# Category 4: All verified query validation edge cases

snowflake_verified_queries:
  # Missing name
  - sql: "SELECT * FROM {{ table('transactions') }}"
    tables:
      - "{{ table('transactions') }}"
    description: Query missing name
  
  # Missing sql
  - name: missing_sql
    tables:
      - "{{ table('transactions') }}"
    description: Query missing sql field
  
  # Missing tables
  - name: missing_tables
    sql: "SELECT * FROM {{ table('transactions') }}"
    description: Query missing tables field
  
  # Empty sql
  - name: empty_sql
    sql: ""
    tables:
      - "{{ table('transactions') }}"
    description: Query with empty SQL
  
  # Whitespace-only sql
  - name: whitespace_sql
    sql: "   "
    tables:
      - "{{ table('transactions') }}"
    description: Query with whitespace-only SQL
  
  # Empty tables list
  - name: empty_tables_list
    sql: "SELECT * FROM {{ table('transactions') }}"
    tables: []
    description: Query with empty tables list
  
  # Tables/SQL mismatch - SQL uses table not in list
  - name: table_sql_mismatch
    sql: "SELECT * FROM {{ table('orders') }} JOIN {{ table('users') }} ON orders.user_id = users.id"
    tables:
      - "{{ table('orders') }}"
      # Missing users table
    description: SQL references users table but it's not in tables list
  
  # Invalid SQL syntax - missing SELECT
  - name: no_select
    sql: "FROM {{ table('transactions') }} WHERE status = 'active'"
    tables:
      - "{{ table('transactions') }}"
    description: SQL missing SELECT keyword
  
  # Invalid SQL syntax - missing FROM
  - name: no_from
    sql: "SELECT * WHERE status = 'active'"
    tables:
      - "{{ table('transactions') }}"
    description: SQL missing FROM clause
  
  # SQL injection in verified query
  - name: sql_injection_query
    sql: "SELECT * FROM {{ table('transactions') }}; DROP TABLE users; --"
    tables:
      - "{{ table('transactions') }}"
    description: Verified query with SQL injection attempt
  
  # Non-existent table in tables list
  - name: nonexistent_table
    sql: "SELECT * FROM {{ table('fake_table') }}"
    tables:
      - "{{ table('fake_table') }}"
    description: Query references table that doesn't exist in metadata
  
  # Template error in SQL
  - name: template_error_in_sql
    sql: "SELECT * FROM {{ table('transactions' }}"  # Missing closing paren
    tables:
      - "{{ table('transactions') }}"
    description: SQL has malformed template
  
  # Very long SQL (10,000+ chars)
  - name: very_long_sql
    sql: "SELECT column1, column2, column3, column4, column5, column6, column7, column8, column9, column10, column11, column12, column13, column14, column15, column16, column17, column18, column19, column20, column21, column22, column23, column24, column25, column26, column27, column28, column29, column30, column31, column32, column33, column34, column35, column36, column37, column38, column39, column40 FROM {{ table('wide_table') }} WHERE condition1 = 'value1' AND condition2 = 'value2' AND condition3 = 'value3' AND condition4 = 'value4' AND condition5 = 'value5'"
    tables:
      - "{{ table('wide_table') }}"
    description: Query with very long SQL statement
  
  # use_as_onboarding as non-boolean
  - name: invalid_onboarding_type
    sql: "SELECT * FROM {{ table('transactions') }}"
    tables:
      - "{{ table('transactions') }}"
    use_as_onboarding: "yes"  # Should be boolean true/false
    description: use_as_onboarding as string instead of boolean

