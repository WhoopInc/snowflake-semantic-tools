# Semantic View Generation Edge Cases
# Category 12: View name validation, SQL escaping, table resolution

semantic_views:
  # Reserved SQL word as view name
  - name: SELECT
    tables:
      - "{{ table('transactions') }}"
    description: View named with SQL reserved word SELECT
  
  - name: VIEW
    tables:
      - "{{ table('transactions') }}"
    description: View named with SQL reserved word VIEW
  
  - name: FROM
    tables:
      - "{{ table('transactions') }}"
    description: View named with SQL reserved word FROM
  
  # Very long view name (255+ characters)
  - name: "extremely_long_semantic_view_name_that_exceeds_reasonable_limits_and_goes_on_for_hundreds_of_characters_to_test_how_the_system_handles_excessively_verbose_naming_that_might_come_from_auto_generation_or_concatenation_and_we_need_to_ensure_it_doesnt_break_snowflake_or_cause_issues"
    tables:
      - "{{ table('transactions') }}"
    description: View with very long name (> 255 chars)
  
  # Special characters in view name
  - name: "view-with-hyphens"
    tables:
      - "{{ table('transactions') }}"
    description: View name with hyphens
  
  - name: "view.with.dots"
    tables:
      - "{{ table('transactions') }}"
    description: View name with dots
  
  - name: "view_with!special"
    tables:
      - "{{ table('transactions') }}"
    description: View name with exclamation mark
  
  # Duplicate table references
  - name: duplicate_tables
    tables:
      - "{{ table('transactions') }}"
      - "{{ table('transactions') }}"
      - "{{ table('transactions') }}"
    description: View with duplicate table references
  
  # Single quotes in description (must be escaped for SQL)
  - name: quotes_in_description
    tables:
      - "{{ table('transactions') }}"
    description: "This view's description has single quotes that must be escaped properly"
  
  # Double quotes in description
  - name: double_quotes_in_description
    tables:
      - "{{ table('transactions') }}"
    description: 'This view has "quoted" text in description'
  
  # Newlines in description
  - name: multiline_description
    tables:
      - "{{ table('transactions') }}"
    description: |-
      This is a multi-line description
      that spans multiple lines
      and should be properly escaped for SQL
  
  # Very long description (must be escaped)
  - name: very_long_description
    tables:
      - "{{ table('transactions') }}"
    description: "This is an extremely long description that goes on for thousands of characters and must be properly escaped when inserted into the SQL COMMENT clause and we need to make sure single quotes are escaped and newlines are handled and special characters don't break the SQL syntax..."
  
  # Non-existent table in view
  - name: view_nonexistent_table
    tables:
      - "{{ table('nonexistent') }}"
    description: View references table that doesn't exist in dbt metadata
  
  # Case mismatch - metadata has 'Users', view uses 'users'
  - name: case_mismatch_table
    tables:
      - "{{ table('Users') }}"  # Different case than in metadata
    description: View table name case doesn't match metadata
  
  # View name conflicts with existing table
  - name: transactions  # Assuming 'transactions' is also a table name
    tables:
      - "{{ table('orders') }}"
    description: View name same as an existing table name
  
  # Empty description (should work, just warning)
  - name: no_description
    tables:
      - "{{ table('transactions') }}"
  
  # Null description
  - name: null_description
    tables:
      - "{{ table('transactions') }}"
    description: null

