# Test fixtures for SQL transformations in relationship conditions
# These should all trigger errors or warnings because transformations may not be valid

snowflake_relationships:
  # Test 1: Type casting with ::
  - name: relationship_with_type_casting
    description: "Should error: type casting (::) in condition"
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    relationship_conditions:
      - "{{ column('orders', 'created_date') }} = {{ column('users', 'registration_date') }}::DATE"
  
  # Test 2: CAST function
  - name: relationship_with_cast_function
    description: "Should error: CAST function in condition"
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    relationship_conditions:
      - "{{ column('orders', 'user_id') }} = CAST({{ column('users', 'id') }} AS VARCHAR)"
  
  # Test 3: COALESCE function
  - name: relationship_with_coalesce
    description: "Should error: COALESCE function in condition"
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    relationship_conditions:
      - "COALESCE({{ column('orders', 'user_id') }}, 0) = {{ column('users', 'id') }}"
  
  # Test 4: TRIM function
  - name: relationship_with_trim
    description: "Should error: TRIM function in condition"
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    relationship_conditions:
      - "TRIM({{ column('orders', 'user_email') }}) = {{ column('users', 'email') }}"
  
  # Test 5: String concatenation
  - name: relationship_with_string_concat
    description: "Should error: string concatenation (||) in condition"
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    relationship_conditions:
      - "{{ column('orders', 'first_name') }} || {{ column('orders', 'last_name') }} = {{ column('users', 'full_name') }}"
  
  # Test 6: Arithmetic operation
  - name: relationship_with_arithmetic
    description: "Should error: arithmetic operation in condition"
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    relationship_conditions:
      - "{{ column('orders', 'user_id') }} + 1 = {{ column('users', 'id') }}"
  
  # Test 7: CASE statement
  - name: relationship_with_case
    description: "Should error: CASE statement in condition"
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    relationship_conditions:
      - "CASE WHEN {{ column('orders', 'user_id') }} > 0 THEN {{ column('orders', 'user_id') }} ELSE NULL END = {{ column('users', 'id') }}"
