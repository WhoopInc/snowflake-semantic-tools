# Relationship Type Validation
# Tests that invalid join_type and relationship_type values are detected

snowflake_relationships:
  # Valid relationship types: one_to_one, one_to_many, many_to_one, many_to_many
  # Valid join types: inner, left_outer, right_outer, full_outer
  
  # Invalid join_type - uppercase
  - name: invalid_join_uppercase
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    join_type: LEFT_OUTER  # Should be lowercase: left_outer
    relationship_type: many_to_one
    relationship_columns:
      - left_column: "{{ column('orders', 'user_id') }}"
        right_column: "{{ column('users', 'id') }}"
  
  # Invalid join_type - SQL style
  - name: invalid_join_sql_style
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    join_type: "LEFT JOIN"  # Should be: left_outer
    relationship_type: many_to_one
    relationship_columns:
      - left_column: "{{ column('orders', 'user_id') }}"
        right_column: "{{ column('users', 'id') }}"
  
  # Invalid join_type - just "left"
  - name: invalid_join_partial
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    join_type: left  # Should be: left_outer
    relationship_type: many_to_one
    relationship_columns:
      - left_column: "{{ column('orders', 'user_id') }}"
        right_column: "{{ column('users', 'id') }}"
  
  # Invalid join_type - typo
  - name: invalid_join_typo
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    join_type: left_outter  # Typo: should be left_outer
    relationship_type: many_to_one
    relationship_columns:
      - left_column: "{{ column('orders', 'user_id') }}"
        right_column: "{{ column('users', 'id') }}"
  
  # Invalid join_type - completely wrong
  - name: invalid_join_wrong
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    join_type: cross  # Not supported
    relationship_type: many_to_one
    relationship_columns:
      - left_column: "{{ column('orders', 'user_id') }}"
        right_column: "{{ column('users', 'id') }}"
  
  # Invalid relationship_type - hyphen instead of underscore
  - name: invalid_rel_type_hyphen
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    join_type: left_outer
    relationship_type: many-to-one  # Should be: many_to_one
    relationship_columns:
      - left_column: "{{ column('orders', 'user_id') }}"
        right_column: "{{ column('users', 'id') }}"
  
  # Invalid relationship_type - uppercase
  - name: invalid_rel_type_uppercase
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    join_type: left_outer
    relationship_type: MANY_TO_ONE  # Should be lowercase
    relationship_columns:
      - left_column: "{{ column('orders', 'user_id') }}"
        right_column: "{{ column('users', 'id') }}"
  
  # Invalid relationship_type - colon notation
  - name: invalid_rel_type_colon
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    join_type: left_outer
    relationship_type: "N:1"  # Should be: many_to_one
    relationship_columns:
      - left_column: "{{ column('orders', 'user_id') }}"
        right_column: "{{ column('users', 'id') }}"
  
  # Invalid relationship_type - typo
  - name: invalid_rel_type_typo
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    join_type: left_outer
    relationship_type: many_to_on  # Typo: should be many_to_one
    relationship_columns:
      - left_column: "{{ column('orders', 'user_id') }}"
        right_column: "{{ column('users', 'id') }}"
  
  # Mismatched column counts
  - name: mismatched_column_count
    left_table: "{{ table('orders') }}"
    right_table: "{{ table('users') }}"
    join_type: left_outer
    relationship_type: many_to_one
    relationship_columns:
      - left_column: "{{ column('orders', 'user_id') }}"
        right_column: "{{ column('users', 'id') }}"
      - left_column: "{{ column('orders', 'date') }}"
        # Missing right_column for second mapping

