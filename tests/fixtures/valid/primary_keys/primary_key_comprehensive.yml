# Primary Key Validation - Comprehensive Test Cases
# Category 8: All PK scenarios including edge cases

version: 2

models:
  # Single column PK
  - name: single_column_pk
    description: Simple single-column primary key
    meta:
      sst:
        database: ANALYTICS
        schema: test
        table: USERS
        primary_key:
          - user_id
    columns:
      - name: user_id
        meta:
          sst:
            column_type: dimension
            data_type: NUMBER
            is_enum: false
  
  # Composite PK (2 columns)
  - name: composite_pk_two
    description: Composite primary key with 2 columns
    meta:
      sst:
        database: ANALYTICS
        schema: test
        table: USER_DAILY
        primary_key:
          - user_id
          - date
    columns:
      - name: user_id
        meta:
          sst:
            column_type: dimension
            data_type: NUMBER
            is_enum: false
      - name: date
        meta:
          sst:
            column_type: time_dimension
            data_type: DATE
            is_enum: false
  
  # Composite PK (3 columns)
  - name: composite_pk_three
    description: Composite primary key with 3 columns
    meta:
      sst:
        database: ANALYTICS
        schema: test
        table: EVENT_LOG
        primary_key:
          - user_id
          - event_type
          - timestamp
    columns:
      - name: user_id
        meta:
          sst:
            column_type: dimension
            data_type: NUMBER
            is_enum: false
      - name: event_type
        meta:
          sst:
            column_type: dimension
            data_type: TEXT
            is_enum: false
      - name: timestamp
        meta:
          sst:
            column_type: time_dimension
            data_type: TIMESTAMP_NTZ
            is_enum: false
  
  # Empty PK list (WARNING)
  - name: empty_pk_list
    description: Model with empty primary_key list
    meta:
      sst:
        database: ANALYTICS
        schema: test
        table: NO_PK
        primary_key: []
    columns:
      - name: id
        meta:
          sst:
            column_type: dimension
            data_type: NUMBER
            is_enum: false
  
  # PK as string instead of list (ERROR)
  - name: pk_as_string
    description: Primary key as string instead of list
    meta:
      sst:
        database: ANALYTICS
        schema: test
        table: BAD_PK
        primary_key: "user_id"  # Should be ["user_id"]
    columns:
      - name: user_id
        meta:
          sst:
            column_type: dimension
            data_type: NUMBER
            is_enum: false
  
  # PK references non-existent column (ERROR)
  - name: pk_nonexistent_column
    description: Primary key references column not in table
    meta:
      sst:
        database: ANALYTICS
        schema: test
        table: BAD_REF
        primary_key:
          - nonexistent_column
    columns:
      - name: existing_column
        meta:
          sst:
            column_type: dimension
            data_type: NUMBER
            is_enum: false
  
  # Case mismatch in PK (should handle gracefully)
  - name: pk_case_mismatch
    description: PK case doesn't match column case
    meta:
      sst:
        database: ANALYTICS
        schema: test
        table: CASE_TEST
        primary_key:
          - user_id  # lowercase
    columns:
      - name: USER_ID  # uppercase
        meta:
          sst:
            column_type: dimension
            data_type: NUMBER
            is_enum: false
  
  # PK with special characters in column name
  - name: pk_special_chars
    description: PK column with special characters
    meta:
      sst:
        database: ANALYTICS
        schema: test
        table: SPECIAL_PK
        primary_key:
          - "user-id"
    columns:
      - name: "user-id"
        meta:
          sst:
            column_type: dimension
            data_type: NUMBER
            is_enum: false
  
  # Very long PK column name
  - name: pk_very_long_name
    description: PK with very long column name
    meta:
      sst:
        database: ANALYTICS
        schema: test
        table: LONG_PK
        primary_key:
          - "this_is_an_extremely_long_primary_key_column_name_that_tests_system_limits"
    columns:
      - name: "this_is_an_extremely_long_primary_key_column_name_that_tests_system_limits"
        meta:
          sst:
            column_type: dimension
            data_type: NUMBER
            is_enum: false

