snowflake_verified_queries:
  - name: monthly_revenue_trend
    description: "Monthly revenue trend analysis"
    question: "What is the revenue trend by month for the last year?"
    sql: |
      SELECT 
        DATE_TRUNC('month', {{ column('orders', 'created_at') }}) as month,
        SUM({{ column('orders', 'amount') }}) as revenue
      FROM {{ table('orders') }}
      WHERE {{ column('orders', 'status') }} = 'completed'
        AND {{ column('orders', 'created_at') }} >= CURRENT_DATE - INTERVAL 1 YEAR
      GROUP BY 1
      ORDER BY 1
    tables:
      - "{{ table('orders') }}"
    verified_by: "data_team"
    verified_at: "2024-01-01"
    use_as_onboarding_question: false
  
  - name: top_customers_by_revenue
    description: "Identify top customers by total revenue"
    question: "Who are our top 10 customers by total revenue?"
    sql: |
      SELECT 
        {{ column('users', 'id') }} as customer_id,
        {{ column('users', 'email') }} as customer_email,
        SUM({{ column('orders', 'amount') }}) as total_revenue,
        COUNT({{ column('orders', 'id') }}) as order_count
      FROM {{ table('users') }}
      JOIN {{ table('orders') }} ON {{ column('users', 'id') }} = {{ column('orders', 'user_id') }}
      WHERE {{ column('orders', 'status') }} = 'completed'
      GROUP BY 1, 2
      ORDER BY 3 DESC
      LIMIT 10
    tables:
      - "{{ table('users') }}"
      - "{{ table('orders') }}"
    verified_by: "analytics_team"
    verified_at: "2024-01-15"
    use_as_onboarding_question: true
